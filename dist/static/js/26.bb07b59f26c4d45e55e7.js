webpackJsonp([26,55],{"80dI":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("gyMJ"),o=(a("NYxO"),{components:{AddOrUpdate:a("eW40").default},name:"store",data:function(){return{dataListSelections:[],storePayInfoVisible:!1,addOrUpdateVisible:!1,dataListLoading:!1,pageSize:13,pageIndex:1,totalPage:1,dataForm:{storeName:"",storeCode:""},dataList:[]}},created:function(){},mounted:function(){this.getDataList()},methods:{selectionChangeHandle:function(e){this.dataListSelections=e},getDataList:function(){var e=this,t={name:this.dataForm.storeName,code:this.dataForm.storeCode,pageIndex:this.pageIndex,pageSize:this.pageSize,isPaging:!0,canViewStores:""};e.dataListLoading=!0,n.a.store.storeAll(t).then(function(t){"0000"===t.code?(e.dataList=t.data,e.totalPage=t.total):e.$message.error(t.message),e.dataListLoading=!1})},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(e){this.pageIndex=e,this.getDataList()},addOrUpdateHandle:function(e){var t=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){t.$refs.addOrUpdate.init(e)})},handelDelete:function(e){var t=this,a=e?[e]:this.dataListSelections.map(function(e){return e.Id}),o={ids:a.join()};this.$confirm("确定对[ids="+a.join()+"]进行["+(void 0===e?"批量删除":"删除")+"]操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.a.store.deleteSubmit(o).then(function(e){"0000"===e.code?t.$message({type:"success",message:"删除成功!",duration:1e3,onClose:function(){t.getDataList()}}):t.$message.error(e.message)})})}}}),i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mod-store"},[a("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getDataList()}}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"门店名称",clearable:""},on:{clear:function(t){e.getDataList()}},model:{value:e.dataForm.storeName,callback:function(t){e.$set(e.dataForm,"storeName",t)},expression:"dataForm.storeName"}})],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"门店编码",clearable:""},on:{clear:function(t){e.getDataList()}},model:{value:e.dataForm.storeCode,callback:function(t){e.$set(e.dataForm,"storeCode",t)},expression:"dataForm.storeCode"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){e.getDataList()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addOrUpdateHandle()}}},[e._v("新增门店")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:e.dataListSelections.length<=0},on:{click:function(t){e.handelDelete()}}},[e._v("批量删除")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{height:e.$store.state.documentClientIFRMAE,data:e.dataList,border:"",stripe:"","header-cell-style":e.$cxObj.tableHeaderStyle},on:{"selection-change":e.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Name","header-align":"center",align:"center",label:"门店名称",width:"100","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"Id","header-align":"center",align:"center",label:"门店ID",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"left",label:"地区：详细地址","min-width":"150","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.FullName)+"："+e._s(t.row.Address))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Contact","header-align":"center",align:"center",label:"联系人","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Phone","header-align":"center",align:"center",label:"联系电话","min-width":"119"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"创建时间","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("myDateFilter")(t.row.CreatedOn,"yyyy-MM-dd hh:mm")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作","header-align":"center",align:"center",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-edit"},on:{click:function(a){e.addOrUpdateHandle(t.row.Id)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",plain:"",icon:"el-icon-delete"},on:{click:function(a){e.handelDelete(t.row.Id)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,13,20,50,100],"page-size":e.pageSize,total:e.totalPage,layout:"prev, pager, next, jumper, sizes, total",background:""},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}}),e._v(" "),e.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.getDataList}}):e._e()],1)},staticRenderFns:[]};var d=a("VU/8")(o,i,!1,function(e){a("pdgZ")},"data-v-4652d6c2",null);t.default=d.exports},eW40:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("gyMJ"),o=a("84O6"),i=a("E4LH"),d={components:{Address:o.default},data:function(){return{nodes:[],visible:!1,dataListLoading:!1,dataForm:{id:0,Name:"",AreaId:"",AddressInfo:"",Contact:"",Phone:""},dataRule:{Name:Object(i.a)("名称必填"),AddressInfo:Object(i.a)("详细地址必填"),Phone:Object(i.d)()}}},methods:{updataAddress:function(e){this.dataForm.AreaId=e},init:function(e){var t=this;this.visible=!0,this.dataForm.id=e||0,this.dataForm.id?(this.dataListLoading=!0,n.a.store.getStoreRow({id:this.dataForm.id}).then(function(e){"0000"===e.code&&(t.dataForm={id:e.data.Id,Name:e.data.Name,AreaId:e.data.AreaId,AddressInfo:e.data.Address,Contact:e.data.Contact,Phone:e.data.Phone}),t.$refs.comAddress.getAddress(t.dataForm.AreaId),t.dataListLoading=!1})):this.$refs.comAddress.getAddress()},handleClose:function(){this.$refs.dataForm.resetFields(),this.dataForm={id:0,Name:"",AreaId:"",AddressInfo:"",Contact:"",Phone:""}},dataFormSubmit:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){var a={id:e.dataForm.id,Name:e.dataForm.Name,AreaId:e.dataForm.AreaId,Address:e.dataForm.AddressInfo,Contact:e.dataForm.Contact,Phone:e.dataForm.Phone};(e.dataForm.id?n.a.store.editSubmit(a):n.a.store.addSubmit(a)).then(function(t){"0000"===t.code?e.$message({message:e.dataForm.id?"编辑成功":"新增成功",type:"success",duration:1500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}}):e.$message.error(t.message)})}})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"700px",title:e.dataForm.id?"编辑":"新增","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:e.handleClose}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"门店名称",prop:"Name"}},[a("el-input",{attrs:{placeholder:"名店名称Name"},model:{value:e.dataForm.Name,callback:function(t){e.$set(e.dataForm,"Name",t)},expression:"dataForm.Name"}})],1),e._v(" "),a("Address",{ref:"comAddress",attrs:{lastCode:e.dataForm.AreaId},on:{chenxi:e.updataAddress}}),e._v(" "),a("el-form-item",{attrs:{label:"详细地址",prop:"AddressInfo"}},[a("el-input",{attrs:{placeholder:"详细AddressInfo"},model:{value:e.dataForm.AddressInfo,callback:function(t){e.$set(e.dataForm,"AddressInfo",t)},expression:"dataForm.AddressInfo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人",prop:"Contact"}},[a("el-input",{attrs:{placeholder:"联系人"},model:{value:e.dataForm.Contact,callback:function(t){e.$set(e.dataForm,"Contact",t)},expression:"dataForm.Contact"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"Phone"}},[a("el-input",{attrs:{placeholder:"电话"},model:{value:e.dataForm.Phone,callback:function(t){e.$set(e.dataForm,"Phone",t)},expression:"dataForm.Phone"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]},s=a("VU/8")(d,r,!1,null,null,null);t.default=s.exports},pdgZ:function(e,t){}});
//# sourceMappingURL=26.bb07b59f26c4d45e55e7.js.map