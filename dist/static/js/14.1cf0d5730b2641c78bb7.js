webpackJsonp([14,32],{"0icb":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),i=a.n(n),o=a("gyMJ"),s=a("E4LH"),r={data:function(){return{siEdit:!0,nodes:[],dataTree:[],checkedKey:[],defaultProps:{children:"children",label:"label",key:"key"},visible:!1,menuList:[],menuListTreeProps:{label:"name",children:"children"},dataForm:{Id:0,Name:"",Description:"",MenuIds:""},dataRule:{Name:Object(s.a)("角色名不能为空")}}},methods:{init:function(e){var t=this;o.a.menu.getTree().then(function(e){"0000"===e.code&&(t.dataTree=JSON.parse(i()(e.data).toLowerCase()))}),this.dataForm.Id=e||0,this.visible=!0,this.$nextTick(function(){t.dataForm.Id&&o.a.role.roleDetail({id:e}).then(function(e){if("0000"===e.code){t.dataForm.Name=e.data.Name,t.dataForm.Description=e.data.Description,t.dataForm.Id=e.data.Id;var a=[];if(e.data.Items.length>0){for(var n=0;n<e.data.Items.length;n++)a.push(e.data.Items[n].MenuId);t.$refs.menuListTree.setCheckedKeys(a)}}})})},handleClose:function(){this.$refs.dataForm.resetFields(),this.$refs.menuListTree.setCheckedKeys([]),this.dataForm.Id="",this.dataForm.Description=""},dataFormSubmit:function(){var e=this;this.checkedKey=this.$refs.menuListTree.getCheckedKeys(),this.$refs.dataForm.validate(function(t){if(t){var a={id:0,Name:e.dataForm.Name,Description:e.dataForm.Description,MenuIds:e.checkedKey.join()};e.dataForm.Id&&(a.id=e.dataForm.Id),(e.dataForm.Id?o.a.role.roleEdit(a):o.a.role.roleAdd(a)).then(function(t){"0000"===t.code?e.$message({message:e.dataForm.roleId?"修改成功":"新增成功",type:"success",duration:1500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}}):e.$message.error(t.message)})}})},getNodes:function(e){if(e.length>0)for(var t=0;t<e.length;t++)e[t].children?this.getNodes(e[t].children):this.nodes.push(e[t].id)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.dataForm.roleId?"修改":"新增","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:e.handleClose}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"Name"}},[a("el-input",{attrs:{placeholder:"角色名称Name"},model:{value:e.dataForm.Name,callback:function(t){e.$set(e.dataForm,"Name",t)},expression:"dataForm.Name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"description"}},[a("el-input",{attrs:{placeholder:"描述"},model:{value:e.dataForm.Description,callback:function(t){e.$set(e.dataForm,"Description",t)},expression:"dataForm.Description"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"mini",label:"授权"}},[a("el-tree",{ref:"menuListTree",attrs:{"show-checkbox":"",data:e.dataTree,props:e.defaultProps,"node-key":"key","default-expand-all":!0,"default-expanded-keys":[1,2,3],"default-checked-keys":e.checkedKey}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]},d=a("VU/8")(r,l,!1,null,null,null);t.default=d.exports},hOGz:function(e,t){},scgI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("0icb"),i=a("gyMJ"),o=(a("E4LH"),{name:"role",data:function(){return{addOrUpdateVisible:!1,dataListLoading:!1,pageSize:10,pageIndex:1,totalPage:1,dataForm:{Name:""},dataList:[],dataListSelections:[]}},components:{AddOrUpdate:n.default},computed:{},mounted:function(){this.getDataList()},methods:{selectionChangeHandle:function(e){this.dataListSelections=e},getDataList:function(){var e=this,t={pageIndex:this.pageIndex,pageSize:this.pageSize,Name:String(this.dataForm.Name),isPaging:!0};this.dataListLoading=!0,i.a.role.jueseList(t).then(function(t){"0000"===t.code?(t.data&&(e.dataList=t.data),e.totalPage=t.total):e.$message.error(t.message),e.dataListLoading=!1})},sizeChangeHandle:function(e){this.pageSize=e,this.getDataList()},currentChangeHandle:function(e){this.pageIndex=e,this.getDataList()},addOrUpdateHandle:function(e){var t=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){t.$refs.addOrUpdate.init(e)})},deleteHandle:function(e){var t=this,a=e?[e]:this.dataListSelections.map(function(e){return e.Id}),n={ids:a.join()};this.$confirm("确定对[ids="+a.join()+"]进行["+(void 0===e?"批量删除":"删除")+"]操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.a.role.roleDelete(n).then(function(e){"0000"===e.code?t.$message({type:"success",message:"删除成功!",duration:1e3,onClose:function(){t.getDataList()}}):t.$message.error(e.message)})})}}}),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mod-role"},[a("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{submit:function(t){t.preventDefault(),e.getDataList()}}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"角色名称",clearable:""},model:{value:e.dataForm.Name,callback:function(t){e.$set(e.dataForm,"Name",t)},expression:"dataForm.Name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){e.getDataList()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addOrUpdateHandle()}}},[e._v("新增角色")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:e.dataListSelections.length<=0},on:{click:function(t){e.deleteHandle()}}},[e._v("批量删除")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"",stripe:"",height:e.$store.state.documentClientIFRMAE,"header-cell-style":e.$cxObj.tableHeaderStyle},on:{"selection-change":e.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"selection","header-align":"center",align:e.$store.state.common.align,width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:e.$store.state.common.align,type:"index",label:"序号",width:"50px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Id","header-align":"center",align:e.$store.state.common.align,width:"50",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Name","header-align":"center",align:e.$store.state.common.align,label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Description","header-align":"center",align:e.$store.state.common.align,label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:e.$store.state.common.align,width:"190",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-edit"},on:{click:function(a){e.addOrUpdateHandle(t.row.Id)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",plain:"",icon:"el-icon-delete"},on:{click:function(a){e.deleteHandle(t.row.Id)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.totalPage,layout:"prev, pager, next, jumper, sizes, total",background:""},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}}),e._v(" "),e.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.getDataList}}):e._e()],1)},staticRenderFns:[]};var r=a("VU/8")(o,s,!1,function(e){a("hOGz")},"data-v-9f2e1018",null);t.default=r.exports}});
//# sourceMappingURL=14.1cf0d5730b2641c78bb7.js.map
